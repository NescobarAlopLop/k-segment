import unittest

import numpy as np
from k_segment_implementation.bicriteria import bicriteria
from utils_seg import best_fit_line_and_cost, calc_best_fit_line_polyfit


class UtilsTest(unittest.TestCase):

    def test_bicriteria_one_dim_data(self):
        k = 2
        depth = 1
        data1 = np.asarray([
            10, 10, 10, 11, 10, 11, 10, 14, 10, 10, 10, 12, 10, 15, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13
            ])[:, np.newaxis]
        _, _, divs = bicriteria(data1.T, k, depth, best_fit_line_and_cost, calc_best_fit_line_polyfit)

    def test_bicriteria_two_dim_data(self):
        k = 2
        depth = 2
        data2 = [[10, 10, 10, 11, 10, 11, 10, 14, 10, 10, 10, 12, 10, 15, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13],
                 [10, 10, 10, 11, 10, 11, 10, 14, 10, 10, 10, 12, 10, 15, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13],
                 [10, 10, 10, 11, 10, 11, 10, 14, 10, 10, 10, 12, 10, 15, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13],
                 [10, 10, 10, 11, 10, 11, 10, 14, 10, 10, 10, 12, 10, 15, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13],
                 [10, 11, 10, 14, 10, 10, 10, 11, 10, 10, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13, 10, 15, 10, 12],
                 [10, 11, 10, 14, 10, 10, 10, 11, 10, 10, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13, 10, 15, 10, 12],
                 [10, 11, 10, 14, 10, 10, 10, 11, 10, 10, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13, 10, 15, 10, 12],
                 [10, 11, 10, 14, 10, 10, 10, 11, 10, 10, 10, 12, 10, 13, 10, 16, 10, 10, 10, 13, 10, 15, 10, 12],
                 [10, 13, 10, 16, 10, 10, 10, 12, 10, 15, 10, 12, 10, 10, 10, 13, 10, 10, 10, 11, 10, 11, 10, 14],
                 [10, 13, 10, 16, 10, 10, 10, 12, 10, 15, 10, 12, 10, 10, 10, 13, 10, 10, 10, 11, 10, 11, 10, 14],
                 [10, 13, 10, 16, 10, 10, 10, 12, 10, 15, 10, 12, 10, 10, 10, 13, 10, 10, 10, 11, 10, 11, 10, 14],
                 [10, 13, 10, 16, 10, 10, 10, 12, 10, 15, 10, 12, 10, 10, 10, 13, 10, 10, 10, 11, 10, 11, 10, 14],
                 [10, 10, 10, 13, 10, 15, 10, 12, 10, 10, 10, 12, 10, 10, 10, 11, 10, 11, 10, 14, 10, 13, 10, 16],
                 [10, 10, 10, 13, 10, 15, 10, 12, 10, 10, 10, 12, 10, 10, 10, 11, 10, 11, 10, 14, 10, 13, 10, 16],
                 [10, 10, 10, 13, 10, 15, 10, 12, 10, 10, 10, 12, 10, 10, 10, 11, 10, 11, 10, 14, 10, 13, 10, 16],
                 [10, 10, 10, 13, 10, 15, 10, 12, 10, 10, 10, 12, 10, 10, 10, 11, 10, 11, 10, 14, 10, 13, 10, 16], ]
        data2 = np.array(data2)

        _, _, divs = bicriteria(data2, k, depth, best_fit_line_and_cost, calc_best_fit_line_polyfit)
